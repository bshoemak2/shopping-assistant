<!DOCTYPE html>
<html>
<head>
    <title>SHOPPING ASSISTANT - Find Products</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            margin: 20px; 
            text-align: center; 
            background-color: black; 
            color: #00FFFF; 
        }
        header { 
            background-color: black; 
            color: #00FFFF; 
            padding: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 2px solid #00FFFF; 
        }
        header img { 
            width: 100px; 
            height: auto; 
            margin-right: 10px; 
        }
        a { 
            color: #00FFFF; 
            text-decoration: none; 
            padding: 0 10px; 
        }
        a:hover { 
            text-decoration: underline; 
        }
        footer { 
            background-color: black; 
            color: #00FFFF; 
            padding: 10px; 
            text-align: center; 
            border-top: 2px solid #00FFFF; 
            position: fixed; 
            bottom: 0; 
            width: calc(100% - 40px); 
        }
        #compare-form input { 
            font-size: 18px; 
            padding: 10px; 
            width: 300px; 
            background-color: #000; 
            color: #00FFFF; 
            border: 1px solid #00FFFF; 
            margin-right: 10px; 
        }
        #compare-form button { 
            font-size: 24px; 
            padding: 14px 28px; 
            background-color: #00FFFF; 
            color: #000; 
            border: 2px solid #00FFFF; 
            font-weight: bold; 
            cursor: pointer; 
            text-transform: uppercase; 
        }
        #compare-form button:hover { 
            background-color: #000; 
            color: #00FFFF; 
        }
        #results { 
            margin-top: 20px; 
            text-align: left; 
            display: inline-block; 
        }
        ul { 
            list-style-type: none; 
            padding: 0; 
        }
        .prompt { 
            font-size: 20px; 
            margin: 10px 0; 
            font-weight: bold; 
        }
        .hacks-title { 
            font-size: 24px; 
            margin-top: 30px; 
        }
        .hacks-list li { 
            font-size: 18px; 
            margin: 10px 0; 
        }
        .hacks-prompt { 
            font-size: 16px; 
            margin-bottom: 20px; 
            font-style: italic; 
        }
    </style>
</head>
<body>
    <header>
        <img src="{{ url_for('static', filename='logo_1.png') }}" alt="SHOPPING ASSISTANT LOGO">
        <h1 style="margin: 0;">SHOPPING ASSISTANT</h1>
    </header>
    <div style="margin: 20px;">
        <h1>FIND PRODUCTS</h1>
        <p>Searchable Products: laptop, yoga mat, board game, beef tallow</p>
        <p class="prompt">Enter products below and click "FIND PRODUCTS" to see results:</p>
        <div id="compare-form">
            <input type="text" id="product-input" placeholder="Enter products (comma-separated, e.g., laptop, yoga mat)">
            <button onclick="compareProducts()">FIND PRODUCTS</button>
        </div>
        <div id="results"></div>
        <h3 class="hacks-title">Barlito's Life Hacks</h3>
        <p class="hacks-prompt">Click these links for funny and quirky products!</p>
        <ul class="hacks-list">
            <li><a href="https://amzn.to/4hBxujc" target="_blank">Wooden clothes pins for sealing potato chip bags and pinching people with bad mojo</a></li>
            <li><a href="https://amzn.to/4kQ39A7" target="_blank">Fart whistles, loads of fun</a></li>
            <li><a href="https://amzn.to/4kRem3n" target="_blank">Bear claw pencils, the only pencil you ever need</a></li>
            <li><a href="https://amzn.to/4kVaBtW" target="_blank">Expresso cups in poo colors</a></li>
            <li><a href="https://amzn.to/4iTYRG5" target="_blank">Unicorn meat (canned) - emergency snack for mythical cravings</a></li>
            <li><a href="https://amzn.to/4l56Diq" target="_blank">Screaming goat button - instant stress relief</a></li>
            <li><a href="https://amzn.to/4bSGxLj" target="_blank">Inflatable tube man - mini desktop wacky waving guy</a></li>
            <li><a href="https://amzn.to/4bWHClp" target="_blank">Bacon bandages - heal with pork power</a></li>
            <li><a href="https://amzn.to/4hF36V4" target="_blank">Toilet bowl night light - glow-in-the-dark potty guide</a></li>
        </ul>
        <p>Contact us for issues and suggestions: <a href="mailto:bshoemak@mac.com">bshoemak@mac.com</a></p>
        <p><a href="/">HOME</a> | <a href="/about">ABOUT</a></p>
    </div>
    <footer>
        <a href="/">HOME</a> | <a href="/about">ABOUT</a>
    </footer>
    <!-- Default Statcounter code for shopping application https://shopping-assistant-5m0q.onrender.com/ -->
    <script type="text/javascript">
        var sc_project=13107765; 
        var sc_invisible=0; 
        var sc_security="da1ff213"; 
        var scJsHost = "https://";
        document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+
        "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="Web Analytics Made Easy - Statcounter" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/13107765/0/da1ff213/0/" alt="Web Analytics Made Easy - Statcounter" referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
    <!-- End of Statcounter Code -->
    <script>
        function compareProducts() {
            const input = document.getElementById('product-input').value;
            console.log('Input:', input); // Debug input
            if (!input) {
                document.getElementById('results').innerHTML = '<p>Please enter products to find.</p>';
                return;
            }
            const products = input.split(',').map(p => p.trim());
            console.log('Products:', products); // Debug products array
            fetch('/compare', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ products: products })
            })
            .then(response => {
                console.log('Response status:', response.status); // Debug response status
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                console.log('Data received:', data); // Debug data
                const results = document.getElementById('results');
                results.innerHTML = '';
                if (data.error) {
                    results.innerHTML = `<p>Error: ${data.error}</p>`;
                } else {
                    for (const [name, info] of Object.entries(data.comparisons)) {
                        results.innerHTML += `
                            <h3>${name}</h3>
                            <p>Price: $${info.price}</p>
                            <p>Rating: ${info.rating}</p>
                            <p>Positive Reviews: ${info.review_summary.positive}</p>
                            <p>Negative Reviews: ${info.review_summary.negative}</p>
                            <p>Sentiment Score: ${info.review_summary.sentiment_score}</p>
                            <p>Keywords: ${JSON.stringify(info.review_summary.keywords)}</p>
                            <p><a href="${info.amazon_url}" target="_blank">Amazon Link</a> ${info.is_search_page ? '(Search Page)' : ''}</p>
                        `;
                    }
                }
            })
            .catch(error => {
                console.error('Fetch error:', error); // Debug error
                document.getElementById('results').innerHTML = `<p>Error: ${error.message}</p>`;
            });
        }

        // Check for search input on page load
        window.onload = function() {
            const storedInput = localStorage.getItem('searchProducts');
            if (storedInput) {
                document.getElementById('product-input').value = storedInput;
                compareProducts();
                localStorage.removeItem('searchProducts'); // Clear after use
            }
        };
    </script>
</body>
</html>